(this["webpackJsonphack-expense-tracker"]=this["webpackJsonphack-expense-tracker"]||[]).push([[0],{24:function(e,t,a){e.exports=a(43)},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(20),l=a.n(r),o=a(10),u=a(3),s=function(){return c.a.createElement("header",null,c.a.createElement("nav",null,c.a.createElement(o.b,{to:"/"},"Bean Counter"),c.a.createElement("ul",{className:"user-links"},c.a.createElement("li",null,c.a.createElement(o.b,{to:"/accounts"},"My Accounts")),c.a.createElement("li",null,c.a.createElement(o.b,{to:"/categories"},"My Categories")))))},i=a(2),m=a(7),d=a(8),p=a(23),E=Object(n.createContext)(),g={accounts:{},categories:{},expenses:{}},v=function(e,t){var a=Object(p.a)({},e);switch(t.type){case"ADD_ACCOUNT":return a.accounts[t.payload.id]=t.payload,a;case"DELETE_ACCOUNT":return Object.values(a.expenses).forEach((function(e){parseInt(e.account)===t.payload&&delete a.expenses[e.id]})),delete a.accounts[t.payload],a;case"ADD_CATEGORY":return Object.values(a.expenses).forEach((function(e){parseInt(e.category)===t.payload&&delete a.expenses[e.id]})),a.categories[t.payload.id]=t.payload,a;case"DELETE_CATEGORY":return delete a.categories[t.payload],a;case"ADD_EXPENSE":return a.expenses[t.payload.id]=t.payload,a;case"DELETE_EXPENSE":return delete a.expenses[t.payload],a;default:throw new Error}},b=function(e){var t=Object(n.useReducer)(v,g),a=Object(i.a)(t,2),r=a[0],l=a[1];return c.a.createElement(E.Provider,{value:[r,l]},e.children)},y=function(e){var t=e.id,a=e.type,r=e.message,l=Object(n.useContext)(E),o=Object(i.a)(l,2),u=(o[0],o[1]);return c.a.createElement("button",{onClick:function(){window.confirm(r)&&u({type:a,payload:t})}},c.a.createElement(m.a,{icon:d.f,className:"secondary-button"}))},f=function(e){var t=e.state,a=e.dispatch,r=e.id,l=t.accounts[r],o=Object(n.useState)(l?l.title:""),u=Object(i.a)(o,2),s=u[0],m=u[1],d=Object(n.useState)(l?l.type:""),p=Object(i.a)(d,2),E=p[0],g=p[1];return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a({type:"ADD_ACCOUNT",payload:{title:s,type:E,id:l?l.id:(new Date).valueOf()}}),m(""),g("")},className:"form"},c.a.createElement("div",{className:"form-input"},c.a.createElement("label",{htmlFor:"account-title"},"Title"),c.a.createElement("input",{type:"text",id:"account-title",required:!0,value:s,onChange:function(e){return m(e.target.value)}})),c.a.createElement("div",{className:"form-input"},c.a.createElement("label",{htmlFor:"account-type"},"Type"),c.a.createElement("select",{id:"account-type",required:!0,value:E,onChange:function(e){return g(e.target.value)}},c.a.createElement("option",{value:""},"- Select an Option -"),c.a.createElement("option",{value:"Cash"},"Cash"),c.a.createElement("option",{value:"Check"},"Check"),c.a.createElement("option",{value:"Credit"},"Credit"),c.a.createElement("option",{value:"Bank Account"},"Bank Account"))),c.a.createElement("button",null,l?"Update":"Add"))},h=a(13),O=function(e){var t=e.state,a=e.dispatch,r=e.id,l=t.accounts?Object.values(t.accounts):[],o=t.categories?Object.values(t.categories):[],u=t.expenses[r],s=Object(n.useState)(u?u.amount:0),m=Object(i.a)(s,2),d=m[0],p=m[1],E=Object(n.useState)(u?u.date:""),g=Object(i.a)(E,2),v=g[0],b=g[1],y=Object(n.useState)(u?u.account:""),f=Object(i.a)(y,2),h=f[0],O=f[1],x=Object(n.useState)(u?u.category:""),j=Object(i.a)(x,2),C=j[0],N=j[1];return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a({type:"ADD_EXPENSE",payload:{amount:d,date:v,account:h,category:C,id:u?u.id:(new Date).valueOf()}}),p(0),b(""),O(""),N("")},className:"form"},c.a.createElement("div",{className:"form-input"},c.a.createElement("label",{htmlFor:"expense-date"},"Date"),c.a.createElement("input",{type:"date",id:"expense-date",required:!0,value:v,onChange:function(e){return b(e.target.value)}})),c.a.createElement("div",{className:"form-input"},c.a.createElement("label",{htmlFor:"expense-amount"},"Amount"),c.a.createElement("input",{type:"number",id:"expense-amount",required:!0,value:d,onChange:function(e){return p(e.target.value)}})),c.a.createElement("div",{className:"form-input"},c.a.createElement("label",{htmlFor:"expense-category"},"Category"),c.a.createElement("select",{id:"expense-account",required:!0,value:h,onChange:function(e){return O(e.target.value)}},c.a.createElement("option",{value:""},"-Select Account-"),l.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.title)})))),c.a.createElement("div",{className:"form-input"},c.a.createElement("label",{htmlFor:"expense-account"},"Account"),c.a.createElement("select",{id:"expense-category",required:!0,value:C,onChange:function(e){return N(e.target.value)}},c.a.createElement("option",{value:""},"-Select Category-"),o.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)})))),c.a.createElement("button",null,u?"Update":"Add"))},x=function(e){var t=e.state,a=e.dispatch,r=e.id,l=t.categories[r],o=Object(n.useState)(l?l.name:""),u=Object(i.a)(o,2),s=u[0],m=u[1],d=Object(n.useState)(l?l.color:""),p=Object(i.a)(d,2),E=p[0],g=p[1];return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a({type:"ADD_CATEGORY",payload:{name:s,color:E,id:l?l.id:(new Date).valueOf()}}),m(""),g("")},className:"form"},c.a.createElement("div",{className:"form-input"},c.a.createElement("label",{htmlFor:"category-name"},"Name"),c.a.createElement("input",{type:"text",id:"category-name",required:!0,value:s,onChange:function(e){return m(e.target.value)}})),c.a.createElement("div",{className:"form-input"},c.a.createElement("label",{htmlFor:"category-color"},"Color"),c.a.createElement("select",{id:"category-color",required:!0,value:E,onChange:function(e){return g(e.target.value)}},c.a.createElement("option",{value:""},"- Choose a Color -"),c.a.createElement("option",{value:"#e84e43"},"Red"),c.a.createElement("option",{value:"#e89843"},"Orange"),c.a.createElement("option",{value:"#e8da43"},"Yellow"),c.a.createElement("option",{value:"#43e89e"},"Green"),c.a.createElement("option",{value:"#43cde8"},"Blue"),c.a.createElement("option",{value:"#4354e8"},"Purple"),c.a.createElement("option",{value:"#e843bc"},"Pink"))),c.a.createElement("button",null,l?"Update":"Add"))},j=function(e){var t=e.columns,a=e.data,n=e.state,r=e.dispatch,l=e.parent,o=Object(h.useTable)({columns:t,data:a},h.useSortBy,h.useExpanded),u=o.getTableProps,s=o.getTableBodyProps,i=o.headerGroups,p=o.rows,E=o.prepareRow,g=o.visibleColumns;return c.a.createElement(c.a.Fragment,null,c.a.createElement("table",Object.assign({className:"table"},u()),c.a.createElement("thead",{className:"table-headers"},i.map((function(e){return c.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map((function(e){return c.a.createElement("th",e.getHeaderProps(e.getSortByToggleProps()),e.render("Header"),c.a.createElement("span",null,e.isSorted?e.isSortedDesc?c.a.createElement(m.a,{icon:d.a,className:"table-caret"}):c.a.createElement(m.a,{icon:d.b,className:"table-caret"}):""))})))}))),c.a.createElement("tbody",s(),p.map((function(e,t){return E(e),c.a.createElement(c.a.Fragment,{key:t},c.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return c.a.createElement("td",e.getCellProps(),e.render("Cell"))}))),e.isExpanded?c.a.createElement("tr",null,c.a.createElement("td",{colSpan:g.length},"Acct"===l?c.a.createElement(f,{state:n,dispatch:r,id:e.cells[2].value}):"Exp"===l?c.a.createElement(O,{state:n,dispatch:r,id:e.cells[5].value}):c.a.createElement(x,{state:n,dispatch:r,id:e.cells[2].value}))):null)})))))},C=function(){var e=Object(n.useContext)(E),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object.values(a.accounts),o=Object(n.useMemo)((function(){return[{Header:"Name",accessor:"title"},{Header:"Type",accessor:"type"},{Header:"Actions",accessor:"id",Cell:function(e){var t=e.cell.value,a=e.row;return c.a.createElement(c.a.Fragment,null,c.a.createElement(y,{id:t,type:"DELETE_ACCOUNT",message:"Are you sure you want to delete this account? Deleting this will also delete any expenses filed under this account"}),c.a.createElement("span",a.getToggleRowExpandedProps(),c.a.createElement(m.a,{icon:d.c,className:"secondary-button"})))}}]}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"My Accounts"),c.a.createElement(f,{state:a,dispatch:r}),c.a.createElement(j,{columns:o,data:l,state:a,dispatch:r,parent:"Acct"}))},N=function(){var e=Object(n.useContext)(E),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object.values(a.categories),o=Object(n.useMemo)((function(){return[{Header:"Name",accessor:"name"},{Header:"Type",accessor:"color",Cell:function(e){var t=e.cell.value;return c.a.createElement("div",{style:{backgroundColor:t,height:"1.6rem",borderRadius:"6px"}})}},{Header:"Actions",accessor:"id",Cell:function(e){var t=e.cell.value,a=e.row;return c.a.createElement(c.a.Fragment,null,c.a.createElement(y,{id:t,type:"DELETE_CATEGORY",message:"Are you sure you want to delete this category? Deleting this will also delete any expenses filed under this category"}),c.a.createElement("span",a.getToggleRowExpandedProps(),c.a.createElement(m.a,{icon:d.c,className:"secondary-button"})))}}]}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"My Categories"),c.a.createElement(x,{state:a,dispatch:r}),c.a.createElement(j,{columns:o,data:l,state:a,dispatch:r,parent:"Cat"}))},A=a(22),D=a.n(A),S=function(e){var t=e.filteredData;return Object(n.useEffect)((function(){document.getElementById("expense-chart").remove();var e=document.getElementById("chart-container"),a=document.createElement("canvas"),n=document.createAttribute("id");n.value="expense-chart",a.setAttributeNode(n),e.appendChild(a);var c=document.getElementById("expense-chart").getContext("2d"),r=function(){var e=Object.values(t.expenses).sort((function(e,t){return new Date(e.date)-new Date(t.date)})),a=[],n={};return e.forEach((function(e){void 0===n[e.categoryName]&&(n[e.categoryName]={label:e.categoryName,data:[],backgroundColor:t.categories[e.category].color})})),e.forEach((function(e){if(a.length&&a[a.length-1]===e.date)for(var t=Object.keys(n),c=0;c<t.length;c+=1){var r=t[c];if(r===e.categoryName){var l=n[r].data;l[l.length-1]+=parseInt(e.amount)}}else{a.push(e.date);for(var o=Object.keys(n),u=0;u<o.length;u+=1){var s=o[u];s===e.categoryName?n[s].data.push(parseInt(e.amount)):n[s].data.push(0)}}})),{labels:a,dataSets:n}}();new D.a(c,{type:"bar",data:{labels:r.labels,datasets:Object.values(r.dataSets)},options:{scales:{xAxes:[{stacked:!0}],yAxes:[{ticks:{beginAtZero:!0},stacked:!0}]}}})})),c.a.createElement("div",{id:"chart-container"},c.a.createElement("canvas",{id:"expense-chart"}))},w=function(){var e=Object(n.useContext)(E),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(""),o=Object(i.a)(l,2),u=o[0],s=o[1],p=Object(n.useState)(""),g=Object(i.a)(p,2),v=g[0],b=g[1],f=Object(n.useState)(""),h=Object(i.a)(f,2),x=h[0],C=h[1],N=Object(n.useState)(""),A=Object(i.a)(N,2),D=A[0],w=A[1],k=v||D?function(){for(var e=JSON.parse(JSON.stringify(a)),t=Object.values(e.expenses),n=0;n<t.length;n+=1)v&&t[n][u]!==v&&delete e.expenses[t[n].id],D&&t[n][x]!==D&&delete e.expenses[t[n].id];return e}():a,T=Object.values(k.expenses).map((function(e){return Object.assign(e,{categoryName:k.categories[e.category].name,accountName:k.accounts[e.account].title})})),F=Object(n.useMemo)((function(){return[{Header:function(){return null},id:"expander",Cell:function(e){var t=e.row;return c.a.createElement("span",t.getToggleRowExpandedProps(),t.isExpanded?c.a.createElement(m.a,{icon:d.d}):c.a.createElement(m.a,{icon:d.e}))}},{Header:"Date",accessor:"date"},{Header:"Amount",accessor:"amount",Cell:function(e){var t=e.cell.value;return"$".concat(t)}},{Header:"Category",accessor:"categoryName"},{Header:"Account",accessor:"accountName"},{Header:"Actions",accessor:"id",Cell:function(e){var t=e.cell.value;return c.a.createElement(y,{id:t,type:"DELETE_EXPENSE",message:"This will permanently delete this expense. Are you sure you want to continue?"})}}]}),[]),P=T.length?null:c.a.createElement("p",{className:"alert"},"No expenses added yet! Make sure you've added an Account and Category before you add expenses"),H=Object.values(a.accounts).length&&Object.values(a.categories).length;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"Expense Report"),c.a.createElement(S,{filteredData:k}),H?c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"New Expense"),c.a.createElement(O,{state:a,dispatch:r})):P,c.a.createElement("h2",null,"All Expenses"),c.a.createElement("div",{className:"filter-bar"},c.a.createElement("h3",null,"Filter Expenses:"),c.a.createElement("select",{id:"account-select","data-type":"account",onChange:function(e){s(e.target.dataset.type),b(e.target.value)},className:"expense-filter"},c.a.createElement("option",{value:""},"- Accounts -"),Object.values(a.accounts).map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.title)}))),c.a.createElement("select",{id:"category-select","data-type":"category",onChange:function(e){C(e.target.dataset.type),w(e.target.value)},className:"expense-filter"},c.a.createElement("option",{value:""},"- Categories -"),Object.values(a.categories).map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)})))),c.a.createElement(j,{columns:F,data:T,state:k,dispatch:r,parent:"Exp"}))};var k=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(s,null),c.a.createElement(b,null,c.a.createElement("main",null,c.a.createElement(u.a,{exact:!0,path:"/"},c.a.createElement(w,null)),c.a.createElement(u.a,{path:"/accounts"},c.a.createElement(C,null)),c.a.createElement(u.a,{path:"/categories"},c.a.createElement(N,null)))))};a(41),a(42);l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(o.a,null,c.a.createElement(k,null))),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.9cfb642b.chunk.js.map